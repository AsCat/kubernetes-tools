#!/bin/bash

# Kubernetes Tools - Copyright (C) 2017 Shawn Wang
# https://github.com/shawnxlw/kubernetes-tools
#
# You may use, distribute or modify this software under the terms of the MIT license.


if ([[ $# -eq 1 ]] && [[ $1 != '-h' ]]) || [[ $# -eq 2 ]] ; then
	resource=${2:-pod}
	PS3="Please select a $resource:"
	
	OLD_IFS="$IFS"
	IFS=$'\n'
	resources=($(kubectl get $resource -n $1|awk '{print $1}'|sed '1d'))
	IFS="$OLD_IFS"
	
	echo -e "All $resource in $1"
	select res_name in "${resources[@]}"
	do 
		kubectl describe $resource $res_name -n $1
		echo
	done
elif [[ $# -eq 0 ]] || ([[ $# -eq 1 ]] && [[ $1 == '-h' ]]) ; then
	echo "Kubernetes Tools - kds"
    echo
    echo "Describe selected pod of [namespace]: kds [namespace]"
    echo "Describe specified [resource] of [namespace]: kds [namespace] [resource]"
else
	echo "invalid parameters, use -h for help"
fi